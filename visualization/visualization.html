<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <!-- Defines usage_by_module_data and usage_by_city_data -->
    <script type="text/javascript" src="data.js"></script>

    <script type="text/javascript">

      // Load the Visualization API and some packages.
      google.charts.load('current', {'packages':['corechart', 'geochart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawCharts);

      // Callback that invokes the chart-drawing functions.
      function drawCharts() {
        drawUsageByModulePieChart();
        drawUsageByCityGeoChart();
        drawUsageByHourColumnChart();
      };


      function drawUsageByModulePieChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_module_data);
        
        // Set chart options
        var options = {'title':'Top Modules by Usage',
                       'width':400,
                       'height':300};
        // Instantiate and draw our chart.
        var chart = new google.visualization.PieChart(document.getElementById('usage_by_module_chart'));
        chart.draw(data, options);
      };

      function drawUsageByCityGeoChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_city_data)
        var options = {
          region: 'US',
          'width': 600,
          backgroundColor: '#81d4fa',
          datalessRegionColor: '#85e085',
          displayMode: 'markers',
          colorAxis: {colors: ['red', 'yellow', 'green']}
        };
        // Instantiate and draw our chart.
        var chart = new google.visualization.GeoChart(document.getElementById('usage_by_city'));
        chart.draw(data, options);
      }

      function drawUsageByHourColumnChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_hour_data)
         var options = {
          title: 'Fuchsia average usage, by hour of the day, PST',
        };
         var options = {
           title: 'Fuchsia average usage, by hour of the day, PST',
           'width': 850,
           hAxis: {
             title: 'Hour of Day',
             gridlines: {count: 12},
           },
         };

        // Instantiate and draw our chart.
        var chart = new google.visualization.ColumnChart(document.getElementById('usage_by_hour'));
        chart.draw(data, options);
      }

    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="usage_by_module_chart"></div>

    Fuchsia Usage and Ratings By City
    <div id="usage_by_city"></div>

    <div id="usage_by_hour"></div>
  </body>
</html>
